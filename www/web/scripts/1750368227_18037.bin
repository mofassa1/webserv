# simulation.py
# -*- coding: utf-8 -*-
from collecteur_signal import CollecteurSignal
import numpy as np

def simuler_environnement(donnees_texte):
    """Simuler des conditions sans fil avec des niveaux de bruit variables."""
    collecteur = CollecteurSignal(donnees_texte)
    for _ in range(150):
        niveau_bruit = np.random.uniform(0.1, 0.5)
        signal = np.random.normal(0, niveau_bruit, 100) + np.random.normal(0, 0.05, 100)
        snr = 20 - (niveau_bruit * 30)
        collecteur.collecter_signal(signal, snr, frequence=2.4e9 if niveau_bruit < 0.3 else 5.0e9)
        if niveau_bruit > 0.4:
            collecteur.journaliser_erreur(_, "erreur_bit", "haute")
    return collecteur